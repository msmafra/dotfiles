# Session/Authentication
#exec-once = uwsm app -s s -t service -- dbus-update-activation-environment --systemd --all
#exec-once = uwsm app -s s -t service -- systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = uwsm app -s s -t service -- /usr/libexec/flatpak-session-helper
exec-once = uwsm app -s s -t service -- gnome-keyring-daemon --start --components=secrets
#exec-once = uwsm app -s s -t service -- hash dbus-update-activation-environment 2>/dev/null &
#exec-once = uwsm app -s s -t service -- /usr/libexec/xfce-polkit
# Appearance / Feel
exec-once = uwsm app -s b -t service -- ~/scripts/nwg-hud.sh
# Password manager
exec-once = uwsm app -s a -u Enpass -d "A cross-platform password and credentials manageer" -- /opt/enpass/Enpass -minimize
#exec-once = uwsm app -s a -- kdeconnect-indicator

monitor = eDP-1, preffered, auto, 1.0
monitor = HDMI-A-1, preffered, auto-left, 1.0

# Workspaces rules
workspace = 1, persistent:true, monitor:HDMI-A-1, default:true
workspace = 2, persistent:true, monitor:HDMI-A-1
workspace = 3, persistent:true, monitor:HDMI-A-1
workspace = 4, persistent:true, monitor:HDMI-A-1
workspace = 5, persistent:true, monitor:HDMI-A-1
workspace = 6, persistent:true, monitor:eDP-1, default:true
workspace = 7, persistent:true, monitor:eDP-1
workspace = 8, persistent:true, monitor:eDP-1
workspace = 9, persistent:true, monitor:eDP-1
workspace = 10, persistent:true, monitor:eDP-1
workspace = name:Gaming, persistent:false, monitor:HDMI-A-1, defaultName:Gaming, f[1], default:false, gapsin:0, gapsout:0, bordersize:0, border:false, shadow:false, rouding:false, decorate:false
workspace = name:Game, persistent:false, monitor:HDMI-A-1, defaultName:Game, f[1], default:false, gapsin:0, gapsout:0, bordersize:0, border:false, shadow:false, rouding:false, decorate:false
# Specials / Scratchpads
workspace = special:nebula, gapsin:2, gapsout:10, border:true, rounding:false, bordersize:1, decorate:true, bordercolor rgb(255,255,255)
workspace = special:magic, gapsin:2, gapsout:10, border:true, rounding:false, bordersize:1, decorate:true
workspace = special:scratchpad, on-create-empty:alacritty
workspace = special:minimized, border:false, decorate:false, gapsout:30
workspace = special:Backups, gapsin:2, gapsout:4, border:true, rounding:false, bordersize:4, decorate:true, bordercolor rgb(255,55,55)
# New Smart gaps (0.49.0)
workspace = w[tv1]s[false], gapsout:0, gapsin:0
workspace = f[1]s[false], gapsout:0, gapsin:0
windowrule = bordersize 1, floating:0, onworkspace:w[tv1]s[false]
windowrule = rounding 8, floating:0, onworkspace:w[tv1]s[false]
windowrule = bordersize 1, floating:0, onworkspace:f[1]s[false]
windowrule = rounding 8, floating:0, onworkspace:f[1]s[false]

# # Animation types available for layers
# https://wiki.hyprland.org/Configuring/Animations/#animation-tree
#
# ######## Layer rules ########
layerrule = noanim, selection

layerrule = blur, logout_dialog
layerrule = animation fade, logout_dialog

layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell

layerrule = blur, launcher

#layerrule = dimaround, ^(swaync-control-center|swaync)$
layerrule = blur, ^(swaync-control-center|swaync)$
layerrule = ignorealpha 0, ^(swaync-control-center|swaync)$
layerrule = animation fade, ^(swaync-control-center|swaync)$

layerrule = blur, hyprpaper
layerrule = animation fade, hyprpaper
layerrule = blur, swaybg
layerrule = animation fade, swaybg

layerrule = blur, nwg-drawer
layerrule = dimaround, nwg-drawer
#layerrule = ignorealpha 0.1, nwg-drawer
layerrule = animation fade, nwg-drawer

layerrule = blur, nwg-hud
layerrule = animation slide, nwg-hud

layerrule = blur, nwggrid
layerrule = animation slide, nwggrid

layerrule = blur, waybar
layerrule = animation slide, waybar

#layerrule = dimaround, waybar
#layerrule = blur, waybar
layerrule = xray on, waybar
layerrule = ignorealpha 0.5, waybar
layerrule = animation slide, waybar


# Sections End #
general {
    gaps_in = 1
    gaps_out = 1
    gaps_workspaces = 10 #?
    border_size = 1
    # col.active_border = rgba(3A4882ff) rgba(334E95ff) 45deg
    # col.inactive_border = rgba(0C122Aff) rgba(0E1836ff) 45deg
    col.active_border = rgba(3A4882ff)
    col.inactive_border = rgba(0C122Aff)
    layout = dwindle
    allow_tearing = yes
    resize_on_border = yes
    hover_icon_on_border = true
    no_focus_fallback = true
    resize_corner = 0
    snap {
        enabled = true
        window_gap = 10
        monitor_gap = 10
        border_overlap = false
    }
}

decoration {

    rounding = 8
    rounding_power = 4
    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
    dim_inactive = true
    dim_strength = 0.1
    dim_special = 0.2
    dim_around = 0.6

    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
        xray = false
        noise = 0.02
        contrast = 1
        brightness = 0.6
        vibrancy = 0.8
        vibrancy_darkness = 1
        special = true
        popups = false
        ignore_opacity = true
    }
    shadow {
        enabled = true
        range = 10
        render_power = 2
        sharp = false
        ignore_window = true
        color = rgba(3,3,3,0.8)
        color_inactive = rgba(133, 133, 133, 0.1)
        offset = 1, 1
        scale = 1.0
    }
}

animations {
    # https://cubic-bezier.com/
    # https://easings.net
    # https://https://www.cssportal.com/css-cubic-bezier-generator/
    $duration=1 # sets the default duration misdefined as speed SPEED

    enabled = true
    first_launch_animation = true
    workspace_wraparound = false

	bezier = wind, 0.05, 0.9, 0.1, 1.05
    bezier = winIn, 0.1, 1.1, 0.1, 1.1
    bezier = winOut, 0.3, -0.3, 0, 1
    bezier = linear, 1, 1, 1, 1
    bezier = Cubic, 0.1, 0.1, 0.1, 1
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = ease-in-out, 0.17, 0.67, 0.83, 0.67
    bezier = ease-in, 0.17, 0.67, 0.83, 0.67
    bezier = ease-out, 0.42, 0, 1, 1
    bezier = easeInOutSine, 0.37, 0, 0.63, 1
    bezier = easeInSine, 0.12, 0, 0.39, 0
    bezier = easeOutSine, 0.61, 1, 0.88, 1

    # animation = NAME, ONOFF, SPEED, CURVE [,STYLE]
    animation = windowsIn, 1, $duration, easeInOutSine, gnomed
    animation = windowsOut, 1, $duration, easeInOutSine, gnomed

    animation = border, 1, $duration, easeInOutSine
    animation = borderangle, 1, 30, easeInOutSine, loop

    animation = workspacesIn, 1, $duration, easeInOutSine, slidefade 80%
    animation = workspacesOut, 1, $duration, easeInOutSine, slidefade 80%

    animation = specialWorkspaceIn, 1, $duration, easeInOutSine, slidevert
    animation = specialWorkspaceOut, 1, $duration, easeInOutSine, slidevert

    animation = layersIn, 1, $duration, easeInOutSine, popin
    animation = layersOut, 1, $duration, easeInOutSine, popin

}

input {
    kb_layout = br
    kb_variant = abnt2
    kb_model =
    kb_options =
    kb_rules =
    follow_mouse = 2
    focus_on_close = 1
    touchpad {
        natural_scroll = no
    }
    sensitivity = 0
    accel_profile = flat
    emulate_discrete_scroll	= 2
}

gestures {
    workspace_swipe = on
}

group {
    col.border_active = 0xfffdfdfd
    col.border_inactive = 0xff7777ff
    col.border_locked_active = 0x66ff55ff
    col.border_locked_inactive = 0x667755ff
    group_on_movetoworkspace = false
    merge_groups_on_groupbar = true

	groupbar {
	    enabled = true
	    height = 20
		stacked = false
	    font_size = 12
		font_weight_active = bold
		font_weight_inactive = normal
		gaps_in = 1
		gaps_out = 1
		keep_upper_gap = false
		indicator_gap = 0
		indicator_height = 0
		render_titles = true
		text_color = 0xff4422ff
        col.active = 0x88dfdfdf
        col.inactive = 0x44dfdfdf
        col.locked_active = 0x88ff55ff
        col.locked_inactive = 0x887755ff
        gradients = true
        gradient_rounding = 0
	}

}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    always_follow_on_dnd = true
    layers_hog_keyboard_focus = true
    animate_manual_resizes = true
    animate_mouse_windowdragging = true
    enable_swallow = true
    swallow_regex = ^(waterfox-fetch.sh|firefox-dev.sh|kitty|allacritty|Alacritty|gnome-terminal|ptyxis|ghostty|distrobox|.AppImage|epiphany|chrome|chromium|brave|firefox|waterfox|librewolf)$
    focus_on_activate = false
    vfr = 1
    font_family = 'Inter Variable'
    splash_font_family = 'Inter Variable'
    col.splash = rgba(160, 186, 241, 1)
    background_color = rgba(8, 10, 11, 1)
    allow_session_lock_restore = true
}

binds {
     workspace_back_and_forth = 1
     allow_workspace_cycles = 1
     workspace_center_on = 1
     window_direction_monitor_fallback = true
     drag_threshold = 10
}

xwayland {
    enabled = true
    use_nearest_neighbor = true
    force_zero_scaling = true
    create_abstract_socket = true
}

opengl {
	nvidia_anti_flicker = true
}

render {
   explicit_sync = 2
   explicit_sync_kms = 2
   direct_scanout = 2
   expand_undersized_textures = true
   xp_mode = false
   ctm_animation = 2
   cm_fs_passthrough = true
   cm_enabled = true
   send_content_type = true
}

cursor {
	no_hardware_cursors = true
	use_cpu_buffer = 2
	enable_hyprcursor = true
	persistent_warps = true
	warp_on_change_workspace = 1
	default_monitor = HDMI-A-1
    sync_gsettings_theme = false
    warp_back_after_non_mouse_input = false
    # added for testing 2025-02-16
    no_warps = true
    persistent_warps = true
    hide_on_key_press = true
    hide_on_touch = true
    warp_back_after_non_mouse_input = true

}

ecosystem {
	no_update_news = false
    enforce_permissions = false
}

# Sections End #

device {
    name = steelseries-steelseries-rival-3
    sensitivity = -0.5
    name = sino-wealth-gaming-kb--keyboard
}

dwindle {
    pseudotile = yes
    preserve_split = yes
}

master {
    allow_small_split = true
    special_scale_factor = 0.945
    mfact = 0.55

    new_status = slave
    new_on_top = false
    new_on_active = none

    orientation = left
    inherit_fullscreen = true
    slave_count_for_center_master = 3

    smart_resizing = true
    drop_at_cursor = true
}
# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
# Default keybinds
#
$mainMod=SUPER
bindd = $mainMod SHIFT ALT CTRL, END, Exits Hyprland by terminating the user sessions, exec, loginctl terminate-user ""
bindd = $mainMod, RETURN, Opens ghostty with my parameterr, exec, uwsm-app -s a -- ghostty --theme="Ayu Mirage" --gtk-titlebar=false --shell-integration-features=true --cursor-style="block" --background-opacity=0.95 --window-decoration=false
bindd = $mainMod ALT, RETURN, Opens Kitty terminal, exec, uwsm-app -s a -- kitty
bindd = $mainMod SHIFT, RETURN, Opens Alacritty terminal, exec, uwsm-app -s a -- alacritty
bindd = $mainMod CTRL, RETURN, Opens Ghostty terminal, exec, uwsm-app -s a -- $ghostty
bindd = $mainMod CTRL ALT, F5, Restarts waybar, exec, killall -SIGUSR2 waybar
bindd = $mainMod, E, Opens the default file manager, exec, uwsm-app -s a -- $fileManager
bindd = $mainMod ALT, E, Opens cosmic file manager, exec, uwsm-app -s a -- cosmic-files
bindd = $mainMod, Q, To close not kill the active window, killactive,
bindd = $mainMod, F, To maximize the active window, fullscreenstate, 1 1
bindd = $mainMod, M, To maximize the active window, fullscreenstate, 1 1
binddr = $mainMod, SUPER_L, Runs your app launcher NWG Drawer, exec, uwsm app -s b -- nwg-drawer -open
binddr = $mainMod, X, Runs your app launcher NWG Grid, execr, uwsm app -s a -- nwggrid
binddr = $mainMod, D, Runs your app launcher fuzzel, execr, uwsm app -s a -- fuzzel --config $XDG_CONFIG_HOME/compositors-shared/fuzzel/fuzzel.ini
binddr = $mainMod, SLASH, Toggles hyprbars, exec, hyprctl plugin load /usr/lib64/hyprland/libhyprbars.so
binddr = $mainMod, BACKSLASH, Toggles hyprbars, exec, hyprctl plugin unload /usr/lib64/hyprland/libhyprbars.so

# Screen capture
# Screenshot with cosmic screenshot tool
bindd = , PRINT, Screen capture without annotation, exec, uwsm app -- ~/scripts/screen_capture.sh quick
bindd = ALT, PRINT, Screen capture with annotation, exec, uwsm app -- ~/scripts/screen_capture.sh
bindd = CTRL, PRINT, Window capture with annotation, exec, uwsm app -- ~/scripts/screen_capture.sh window
bindd = SHIFT, PRINT, Region capture with annotation, exec, uwsm app -- ~/scripts/screen_capture.sh region
bindd = $mainMod CTRL, PRINT, Region capture without annotation, exec, uwsm app -- ~/scripts/screen_capture.sh quick
bindd = $mainMod SHIFT, PRINT, Region capture without annotation, exec, uwsm app -- ~/scripts/screen_capture.sh

# Window behavior manipulation
# Window handling
bindd = $mainMod SHIFT, P, Pins the window making it visible in all workspaces, pin
bindd = $mainMod, SPACE, Toggles between floating and tiling mode, togglefloating,
bindd = $mainMod CTRL, D, Puts window in pseudo tiling mode, pseudo, # dwindle
bindd = $mainMod SHIFT, D, Toggles the split (top/side) of the current window, togglesplit, # dwindle

# Move focus with arrow keys
# Move focus with mainMod + arrow keys
bindde = $mainMod CTRL SHIFT, left, Move focus to the left, movefocus, l
bindde = $mainMod CTRL SHIFT, right, Move focus to the right, movefocus, r
bindde = $mainMod CTRL SHIFT, up, Move focus upwards, movefocus, u
bindde = $mainMod CTRL SHIFT, down, Move focus downwards, movefocus, d

# Grouping
bindd = $mainMod, G, Toggles the current active window into a group, togglegroup
bindd = $mainMod, F12, Toggles the current active window into a group, lockactivegroup, toggle
bindd = $mainMod SHIFT, G, Moves the active window into a group in a specified direction, moveintogroup
bindd = $mainMod CTRL, G, Moves the active window out of a group, moveoutofgroup
bindd = $mainMod ALT, G, Switches to the next window in a group, changegroupactive

# Lockscreen
bindd = $mainMod, L, Activates the lockscreen, exec, $lockScreenCmd

# Switch workspaces with mainMod + [0-9]
binddr = $mainMod, 1, Switch to workspace 1, workspace, 1
binddr = $mainMod, 2, Switch to workspace 2, workspace, 2
binddr = $mainMod, 3, Switch to workspace 3, workspace, 3
binddr = $mainMod, 4, Switch to workspace 4, workspace, 4
binddr = $mainMod, 5, Switch to workspace 5, workspace, 5
binddr = $mainMod, 6, Switch to workspace 6, workspace, 6
binddr = $mainMod, 7, Switch to workspace 7, workspace, 7
binddr = $mainMod, 8, Switch to workspace 8, workspace, 8
binddr = $mainMod, 9, Switch to workspace 9, workspace, 9
binddr = $mainMod, 0, Switch to workspace 10, workspace, 10
binddr = $mainMod ALT, 0, Switch to workspace Gaming, workspace, name:Gaming
binddr = $mainMod SHIFT ALT, 0, Switch to workspace Gaming, movetoworkspace, name:Gaming

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bindd = $mainMod SHIFT, 1, Send active window to workspace 1 silently, movetoworkspacesilent, 1
bindd = $mainMod SHIFT, 2, Send active window to workspace 2 silently, movetoworkspacesilent, 2
bindd = $mainMod SHIFT, 3, Send active window to workspace 3 silently, movetoworkspacesilent, 3
bindd = $mainMod SHIFT, 4, Send active window to workspace 4 silently, movetoworkspacesilent, 4
bindd = $mainMod SHIFT, 5, Send active window to workspace 5 silently, movetoworkspacesilent, 5
bindd = $mainMod SHIFT, 6, Send active window to workspace 6 silently, movetoworkspacesilent, 6
bindd = $mainMod SHIFT, 7, Send active window to workspace 7 silently, movetoworkspacesilent, 7
bindd = $mainMod SHIFT, 8, Send active window to workspace 8 silently, movetoworkspacesilent, 8
bindd = $mainMod SHIFT, 9, Send active window to workspace 9 silently, movetoworkspacesilent, 9
bindd = $mainMod SHIFT, 0, Send active window to workspace 10 silently, movetoworkspacesilent, 10

bindd = $mainMod CTRL, 1, Throws all unfocused windows on the current workspace to the given workspace, plugin:xtd:throwunfocused
bindd = $mainMod CTRL, 2, Kinda inverse of throwunfocused. Bring all windows from a given workspace to the current one., plugin:xtd:bringallfrom
bindd = $mainMod CTRL, 3, Close all unfocused windows on the current workspace., plugin:xtd:closeunfocused

# Special workspaces (scratchpads)
bindd = $mainMod, F9, Call special workspace Nebula, togglespecialworkspace, nebula
bindd = $mainMod SHIFT, F9, Move active window to special workspace Magic, movetoworkspacesilent, special:nebula
bindd = $mainMod, F10, Call special workspace Magic, togglespecialworkspace, magic
bindd = $mainMod SHIFT, F10, Move active window to special workspace Magic, movetoworkspacesilent, special:magic
bindd = $mainMod, F11, Call special workspace Magic, togglespecialworkspace, scratchpad
bindd = $mainMod SHIFT, F11, Move active window to special workspace Magic, movetoworkspacesilent, special:scratchpad

# Minimized Windows (from hyprland wiki)
bindd = $mainMod, S, Minimize/foregrounds a single window, togglespecialworkspace, minimized
bindd = $mainMod, S, Minimize/foregrounds a single window, movetoworkspace, +0
bindd = $mainMod, S, Minimize/foregrounds a single window, togglespecialworkspace, minimized
bindd = $mainMod, S, Minimize/foregrounds a single window, movetoworkspace, special:minimized
bindd = $mainMod, S, Minimize/foregrounds a single window, togglespecialworkspace, minimized

# Scroll through existing workspaces with mainMod + scroll
bindd = $mainMod, mouse_down, Scroll through workspaces incrementally, workspace, e+1
bindd = $mainMod, mouse_up, Scroll through workspaces decrementally,workspace, e-1

# Next / Previous Workspace with Page Up and Page Down
bindd = $mainMod, PAGE_DOWN, Scroll through workspaces incrementally, workspace, e+1
bindd = $mainMod, PAGE_UP, Scroll through workspaces decrementally, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
binddm = $mainMod, mouse:272, Move window with $mainMod + left mouse button, movewindow
binddc = $mainMod, mouse:272, Move window with $mainMod + left mouse button, togglefloating
binddm = $mainMod, mouse:273, Resize window with $mainMod + right mouse button, resizewindow

# Move the whole workspace
bindd = $mainMod ALT, period, Move current workspace to another monitor incrementally, movecurrentworkspacetomonitor, +1
bindd = $mainMod ALT, comma, Move current workspace to another monitor decrementally, movecurrentworkspacetomonitor, -1

# Trigger when the notebook lid switch is toggled
binddl = , switch:on:Lid Switch, Deactivates eDP-1 (integrated) when the lid is closed,exec, hyprctl keyword monitor "eDP-1, disable"
binddl = , switch:off:Lid Switch, Activates eDP-1 (integrated) when the lid is open, exec, hyprctl keyword monitor "eDP-1, enable"

# Two steps to move a window to another workspace
# useful for number of workspaces greater than 10
# bind = $mainMod, W, submap, MoveToWorkspace
# submap = MoveToWorkspace
# binde = , escape, submap, MoveToWorkspace
# binde = , movetoworkspace
# submap = reset
# Activate keyboard window resize mode
# https://wiki.hyprland.org/0.45.0/Configuring/Binds/#submaps
bindd = $mainMod ALT, SPACE, Activates window resizing mode, submap, Resize mode
submap = Resize mode
bindde = , right, Resize to the right (resizing mode), resizeactive, 15 0
bindde = , left, Resize to the left (resizing mode), resizeactive, -15 0
bindde = , up, Resize upwards (resizing mode), resizeactive, 0 -15
bindde = , down, Resize downwards (resizing mode), resizeactive, 0 15
bindde = , l, Resize to the right (resizing mode), resizeactive, 15 0
bindde = , h, Resize to the left (resizing mode), resizeactive, -15 0
bindde = , k, Resize upwards (resizing mode), resizeactive, 0 -15
bindde = , j, Resize downwards (resizing mode), resizeactive, 0 15
bindd = , escape, Ends window resizing mode, submap, reset
submap = reset

# Special keys, multimedia etc
bindde = , XF86AudioRaiseVolume, Increases volume gradually by 5%, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindde = , XF86AudioLowerVolume, Decreases volume gradually by 5%, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindde = , XF86AudioMute, Mute audio output, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bindde = , XF86AudioMicMute, Mute audio input, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindde = , XF86MonBrightnessDown, Increases brightness gradually by 5%, exec, brightnessctl set 5%-
bindde = , XF86MonBrightnessUp, Decreases brightness gradually by 5%, exec, brightnessctl set 5%+
bindde = , XF86AudioPlay, Music player toggle play/pause,exec, playerctl play-pause
bindde = , XF86AudioNext, Music player next track, exec, playerctl next
bindde = , XF86AudioPrev, Music player previous track, exec, playerctl previous
bindde = , XF86audiostop, Music player stop, exec, playerctl stop
bind = SUPER, BACKSPACE, hyprexpo:expo, toggle # can be: toggle, off/disable or on/enable
### ALT + TAB
# https://wiki.hyprland.org/Configuring/Uncommon-tips--tricks/#alt-tab-behaviour
exec-once = foot --config $XDG_CONFIG_HOME/compositors-shared/foot/foot.ini --server
bind = ALT, tab, exec, hyprctl -q keyword animations:enabled false ; hyprctl -q dispatch exec "footclient -a alttab $XDG_CONFIG_HOME/scripts/alttab/alttab.sh" ; hyprctl -q keyword unbind "ALT, TAB" ; hyprctl -q dispatch submap alttab
submap=alttab
bind = ALT, tab, sendshortcut, , tab, class:alttab
bind = ALT SHIFT, tab, sendshortcut, shift, tab, class:alttab
bindrt = ALT, ALT_L, exec, $XDG_CONFIG_HOME/scripts/alttab/disable.sh ; hyprctl -q dispatch sendshortcut , return,class:alttab
bind = ALT, Return, exec, $HOME/scripts/alttab/disable.sh ; hyprctl -q dispatch sendshortcut ,return, class:alttab
bind = ALT, escape, exec, $XDG_CONFIG_HOME/scripts/alttab/disable.sh ; hyprctl -q dispatch sendshortcut , escape,class:alttab
submap = reset

# Windows rules
windowrule = suppressevent maximize, class:.* # You'll probably like this.
windowrule = persistentsize, class:.* # to keep last window size used on floating windows
# Persistency test
windowrule = float, class:^(com.system76.CosmicFiles)$
windowrule = persistentsize, class:^(com.system76.CosmicFiles)$
windowrule = float, title:^(.*Hyprshot.*)$
windowrule = float, class:mpv
windowrule = persistentsize, class:mpv
windowrule = center, class:^(org.gnome.Nautilus)(.*)$
windowrule = persistentsize, class:^(org.gnome.Nautilus)(.*)$
windowrule = dimaround, title:^(.*fuzzel.*)$
# Xwaylandvideobridge (if installed) KDE sollution for screensharing
windowrule = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrule = noanim, class:^(xwaylandvideobridge)$
windowrule = noinitialfocus, class:^(xwaylandvideobridge)$
windowrule = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrule = noblur, class:^(xwaylandvideobridge)$
# Clipboard app (com.github.hluk.copyq)
windowrule = tag +ClipboardManager, class:^(com.github.hluk.copyq)$
windowrule = float, class:^(com.github.hluk.copyq)$
windowrule = size 65% 65%, class:^(com.github.hluk.copyq)$
windowrule = bordercolor rgba(ff0000ff) rgba(aa0000ff), class:^(com.github.hluk.copyq)$
windowrule = dimaround, class:^(com.github.hluk.copyq)$
windowrule = animation popin, class:^(com.github.hluk.copyq)$
# Browsers related
windowrule = opaque, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$
windowrule = noblur, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$
windowrule = float, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$, tag +browser +navegador
windowrule = center center, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$, title:^()$
windowrule = size 400 175, title:^(.*Troubleshoot Mode.*), tag +troubleshoot +browser +navegador
windowrule = opacity 1.0 override 1.0 override 1.0 override, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$

# For Vivaldi's first window (profile selection)
windowrule = float, class:^(.*vivaldi.*)
windowrule = size 57.8125% 68.51851851851852%, class:^(.*vivaldi.*)
windowrule = center center, class:^(.*vivaldi.*)

# For Brave's first window (profile selection)
windowrule = float, class:^(brave-browser), title:^(Brave)
windowrule = size 57.8125% 68.51851851851852%, class:^(brave-browser), title:^(Brave)
windowrule = center center, class:^(brave-browser), title:^(Brave)

# Some defaults
windowrule = tile, class:^(.*office.*)$
windowrule = float, title:^(Junction)(.*)$
windowrule = float, class:(org.gnome.Calculator)$
windowrule = center, class:(org.gnome.Calculator)$
windowrule = center, class:^(Enpass), title:^(Enpass)$
windowrule = size 90% 90%, class:^(Enpass), title:^(Enpass)$
windowrule = opacity 1 override 1, class:^(Alacritty|org.contourterminal.Contour|com.mitchellh.ghostty|org.gnome.Ptyxis|kitty|gnome-terminal)(.*)$
windowrule = float, class:^(nm-connection-editor)(.*)$
windowrule = size 51.666666667% 64.444444444%, class:^(nm-connection-editor)(.*)$
windowrule = float, class:^(nwg-displays)$
windowrule = size 1280 720, class:^(nwg-displays)$
windowrule = minsize 1 1, class:^(nwg-displays)$
windowrule = float, class:^(org.freedesktop.GnomeAbrt)$

# ProtonVPN
windowrule = float, class:^(protonvpn-app)$,title:^(Proton VPN)
windowrule = size 400 1020, class:^(protonvpn-app)$,title:^(Proton VPN)
windowrule = minsize 1 1, class:^(protonvpn-app)$,title:^(Proton VPN)
windowrule = move 1515 45, class:^(protonvpn-app)$,title:^(Proton VPN)

# Dialogs / Popups
windowrule = float, class:^()$,title:^(Save File)$
windowrule = float, class:^()$,title:^(Open File)$
windowrule = float, title:^(Open File|Open image|Abrir Arquivo|Abrir imagem)(.*)$
windowrule = size 1280 720, title:^(Open File|Open image|Abrir Arquivo|Abrir imagem)(.*)$
windowrule = center center, title:^(Open File|Open image|Abrir Arquivo|Abrir imagem)(.*)$
windowrule = float, title:^(Select a File)(.*)$
windowrule = float, title:^(Pick a file)(.*)$
windowrule = float, title:^(Choose wallpaper)(.*)$
windowrule = float, title:^(Open Folder)(.*)$
windowrule = float, title:^(Save As)(.*)$
windowrule = float, title:^(Library)(.*)$
windowrule = float, title:^(Password Required)(.*)$
windowrule = float, title:^(Compress folders|Compactar pastas)(.*)$
windowrule = size 430 900, class:^(org.gnome.Nautilus)$,title:^(Abrir arquivo)$
windowrule = float, class:^(org.gnome.Nautilus)$,title:^(Propriedades|Properties)(.*)$
windowrule = size 31.7% 47.6%, class:^(org.gnome.Nautilus)$,title:^(Propriedades|Properties)(.*)$
windowrule = dimaround, class:^(org.gnome.Nautilus)$,title:^(Propriedades|Properties)(.*)$
windowrule = float, class:(.*)(Dialog|Diálogo)$ # For COSMIC Dialogs
windowrule = float, class:^(fsearch)$
windowrule = size 77% 77%, class:^(fsearch)$
windowrule = dimaround, class:^(fsearch)$
# Not working for Enpass. Doesn't matter if it's in docked mode or not.
# It always opens in the wrong place
windowrule = float, title:^(Enpass Assistant)(.*)$
windowrule = move 65% 25%, title:^(Enpass Assistant)(.*)$
windowrule = bordercolor rgb(FFFF00), title:^(Enpass Assistant)(.*)$
windowrule = bordersize 4, title:^(Enpass Assistant)(.*)$

# Float Necessary Windows
windowrule = float, class:^(Rofi|Wofi)$
windowrule = float, class:^(org.pulseaudio.pavucontrol|cosmic|com.system76.CosmicSettings)$
windowrule = float, initialClass:^(com.system76.CosmicSettings)$
windowrule = float, class:^()$,title:^(Picture in picture)$
windowrule = float, class:^(brave-browser|zen|librewolf|org.mozilla.firefox|firefox|floorp|vivaldi-stable|Org.chromium.Chromium|chromium-browser|Google-chrome)$,title:^(Picture-in-Picture)$
windowrule = float, class:^(blueman-manager)$
windowrule = float, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal-kde|xdg-desktop-portal-hyprland)(.*)$
windowrule = float, class:^(polkit-gnome-authentication-agent-1|hyprpolkitagent|org.org.kde.polkit-kde-authentication-agent-1|xfce-polkit)(.*)$
windowrule = float, class:^(CachyOSHello)$
windowrule = float, class:^(zenity)$
windowrule = float, class:^(org.gnome.)(.*)$
windowrule = float, class:^(gnome-)(.*)$
windowrule = float, title:^(Junction)(.*)$
windowrule = float, title:^(NVIDIA Settings)(.*)$
windowrule = float, title:^(Sobre|About|Preferences|Preferências)(.*)$
windowrule = center, class:^(org.gnome.)(.*)$
windowrule = center, class:^(gnome-)(.*)$
windowrule = center, title:^(NVIDIA Settings)(.*)$
windowrule = center, title:^(Sobre|About|Preferences|Preferências)(.*)$
windowrule = size 1280 720, title:^(NVIDIA Settings)(.*)$
windowrule = size 720 auto, title:^(Sobre|About|Preferences|Preferências)(.*)$
windowrule = size 720 80%, title:^(flatpak)(.*)$
windowrule = float, class:^(org.gnome.Nautilus)(.*)$
windowrule = center, class:^(org.gnome.Nautilus)(.*)$
windowrule = size 1600 900, class:^(org.gnome.Nautilus)(.*)$
windowrule = size 430 900, class:^(org.gnome.Nautilus)$, title:^(Preferências)$
windowrule = float, class:^(udiskie)$
windowrule = center center, class:^(udiskie)$

# Steam, Nvidia etc
windowrule = workspace name:Gaming, class:^(steam|com.heroicgameslauncher.hgl)(.*)$
windowrule = float, class:^(steam|heroic)(.*)$, title:^(Steam|Heroic Games Launcher)(.*)$
windowrule = minsize 1450 1005, class:^(steam)(.*)$, title:^(Steam)(.*)$
windowrule = center center, class:^(steam|heroic)(.*)$, title:^(Steam|Heroic Games Launcher)(.*)$
windowrule = workspace 5, class:^(steam)(.*)$, title:^(Friends List)$
windowrule = workspace 5, class:^(steam)(.*)$, title:^(Sign in to Steam)$
windowrule = workspace 5, class:^(steam)(.*)$, title:^(Steam Dialog)$
windowrule = workspace 5, class:^(steam)(.*)$, title:^(Special Offers)$
windowrule = float, class:^(steam)(.*)$
windowrule = float, class:^(steam)(.*)$, title:^(Sign in to Steam)(.*)$
windowrule = float, class:^()$, title:^(Steam - Self Updater)$
windowrule = float, class:^(steam)(.*)$, title:^(Friends List|Lista de amigos)$
windowrule = float, class:^(steam)(.*)$, title:^(Steam Settings)$
windowrule = float, class:^(steam)(.*)$, title:^(Steam Dialog)$
windowrule = center center, class:(steam)$, title:^(Sign in to Steam)(.*)$
windowrule = center center, class:(steam)$, title:^(Special Offers)(.*)
windowrule = center center, class:(steam)$, title:^(Steam Dialog)(.*)
windowrule = minsize 1 1, title:^()$, class:^(steam)(.*)$
windowrule = forcergbx, title:^(), class:^(steam)(.*)$
windowrule = move 1311 70, class:^(steam)(.*)$, title:^(Friends List)(.*)$
windowrule = size 24% 90%, class:^(steam)(.*)$, title:^(Friends List)$
windowrule = size 33.75% 26.574074074074073%, class:^(steam)(.*)$, title:^(Steam Dialog)$
windowrule = minsize 33.75% 26.574074074074073%, class:^(steam)(.*)$, title:^(Steam Dialog)$
windowrule = maxsize 33.75% 26.574074074074073%, class:^(steam)(.*)$, title:^(Steam Dialog)$
windowrule = float, class:^(steam)(.*)$, title:^(Launcher)(.*)$
windowrule = size 1200 800, class:^(steam)(.*)$, title:^(Launcher)(.*)$
windowrule = center, class:^(steam)(.*)$, title:^(Launcher)(.*)$
windowrule = center center, class:^(steam)(.*)$, title:^(Steam Settings)(.*)$
windowrule = minsize 1280 720, class:^(steam)(.*)$, title:^(Steam Settings)(.*)$
windowrule = maxsize 1280 720, class:^(steam)(.*)$, title:^(Steam Settings)(.*)$
windowrule = minsize 36.77% 76.85%, class:^(steam)(.*)$, title:^(Special Offers)(.*)$
windowrule = opacity 1 override 1 override 1, class:^(steam)(.*)$, title:^(Steam Settings)(.*)$

# For gaming
windowrule = workspace name:Game, class:^steam_app_\d+$
windowrule = fullscreen, class:^steam_app\d+$
windowrule = content game, class:^steam_app\d+$
windowrule = monitor $priMon, class:^steam_app_\d+$
windowrule = immediate, class:^(gamescope)$
windowrule = forcergbx, title:^(), class:^(steam_app_\d+)$
windowrule = immediate, class:^steam_app_\d+$
windowrule = fullscreen, class:^(gamescope)$
windowrule = monitor $priMon, class:^(gamescope)$
windowrule = workspace name:Game, class:^(gamescope)$
windowrule = fullscreen, initialClass:^(Godot)$
windowrule = content game, initialClass:^(Godot)$
windowrule = monitor $priMon, initialClass:^(Godot)$
windowrule = workspace name:Game, initialClass:^(Godot)$
windowrule = immediate, initialClass:^(Godot)$

# based on ML4W, Pavucontrol floating
windowrule = float, class:(.*org.pulseaudio.pavucontrol.*)$
windowrule = size 700 600, class:(.*org.pulseaudio.pavucontrol.*)$
windowrule = center, class:(.*org.pulseaudio.pavucontrol.*)$
windowrule = pin, class:(.*org.pulseaudio.pavucontrol.*)$

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
windowrule = float,class:(com.ml4w.calendar)
windowrule = move 761 34, class:(com.ml4w.calendar)
windowrule = pin, class:(com.ml4w.calendar)
windowrule = size 400 400,class:(com.ml4w.calendar)
windowrule = float, class:(org.gnome.Calendar)
windowrule = move 50%-w-580 35, class:(org.gnome.Calendar)
windowrule = pin, class:(org.gnome.Calendar)
windowrule = size 580 600, class:(org.gnome.Calendar)

# These next two rules deal with chromium based and electron apps menu blur/opacity glitches
windowrule = opacity 1 override 1, focusHistoryID:2, onworkspace:w[fv1-10]
windowrule = noblur 1 override 1, focusHistoryID:2, onworkspace:w[fv1-10]
windowrule = noshadow 1 override 1, focusHistoryID:2, onworkspace:w[fv1-10]
windowrule = float, class:^(org.kde.kdialog)$

# Dimming Thunar renaming dialog
windowrule = dimaround, class:^(thunar)$, title:^(.*Rename.*|.*Preferences.*|.*Actions.*|.*Renomear.*|.*Preferências.*|.*Ações.*)$
windowrule = move 1 1, class:^(thunar)$, focusHistoryID:1


workspace = special:alttab, gapsout:0, gapsin:0, bordersize:0
windowrule = noanim, class:alttab
windowrule = stayfocused, class:alttab
windowrule = workspace special:alttab, class:alttab
windowrule = bordersize 2, class:alttab
windowrule = bordercolor rgba(4444aaff) rgba(aa44ddff) 45deg, class:alttab
windowrule = float, class:alttab
windowrule = size 1280 720, class:alttab
### ALT + TAB

# ZOOM
# https://wiki.hyprland.org/0.49.0/Configuring/Uncommon-tips--tricks/#zoom
binde = $mainMod, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
binde = $mainMod, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')
binde = $mainMod, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
binde = $mainMod, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')
bind = $mainMod SHIFT, minus, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, 0, exec, hyprctl -q keyword cursor:zoom_factor 1

# Fullscreenstate sets the focused window’s fullscreen mode and the one
# sent to the client	internal client, where internal and client can be
# -1 - current
# 0 - none
# 1 - maximize
# 2 - fullscreen
# 3 - maximize and fullscreen
#bindd = $mainMod, F, Puts window in fullscreen mode keeping shape, fullscreenstate, 0 1
#bind = $mainMod SHIFT, F, fullscreenstate, 0 0
#bindd = $mainMod, Z, Puts window in fullscreen mode not keeping shape, fullscreenstate, 0 2
# bind = $mainMod, Ç, fullscreenstate, -1 3

# fullscreen state: internal client, where internal and client can be
#                 -1 - current
#                 0 - none
#                 1 - maximize
#                 2 - fullscreen
#                 3 - maximize and fullscreen
# fullscreen:
#                 0 - fullscreen (takes your entire screen)
#                 1 - maximize (keeps gaps and bar(s))

# Maximizes and fullscreen to the whole screen
bindd = $mainMod ALT, 1, Fullscreen 0, fullscreen, 0

# Maximizes the window, respects gaps and status bars; fullscreen with F11 limited to the window's occupied area
bindd = $mainMod ALT, 2, Fullscreen 1, fullscreen, 1

# No initial visual changes; resets everything or does nothing
bindd = $mainMod ALT, 3, Fullscreen State -1 -1, fullscreenstate, -1 -1

# No initial visual changes; resets everything probably or does nothing
bindd = $mainMod ALT, 4, Fullscreen State -1 0, fullscreenstate, -1 0

# No initial visual changes; locks fullscreen to the tile
bindd = $mainMod ALT, 5, Fullscreen State -1 1, fullscreenstate, -1 1

# Maximizes and fullscreens to its tile; locks fullscreen to the tile
bindd = $mainMod ALT, 6, Fullscreen State -1 2, fullscreenstate, -1 2

# Maximizes and fullscreens to its tile; locks fullscreen to the tile
bindd = $mainMod ALT, 7, Fullscreen State -1 3, fullscreenstate, -1 3

# Restore normal behavior it seems
bindd = $mainMod ALT, 8, Fullscreen State 0 0, fullscreenstate, 0 0

# No initial visual changes; keeps normal behavior
bindd = $mainMod ALT, 9, Fullscreen State 0 -1, fullscreenstate, 0 -1

# No initial visual changes; locks fullscreen to the tile
bindd = $mainMod ALT, 0, Fullscreen State 0 1, fullscreenstate, 0 1

# Maximizes and fullscreens the window to its tile, respects gaps and status bars; fullscreen with F11 fills the tile
bindd = $mainMod ALT, F1, Fullscreen State 0 2, fullscreenstate, 0 2

# Maximizes and fullscreens the window to its current tile, respects gaps and status bars; fullscreen with F11 fills the current tile
bindd = $mainMod ALT, F2, Fullscreen State 0 3 , fullscreenstate, 0 3

# Maximizes the window to current workspace, respects gaps and status bars; fullscreen with F11 limited to the window's occupied area
bindd = $mainMod ALT, F3, Fullscreen State 1 0, fullscreenstate, 1 0

# Maximizes the window to current workspace, respects gaps and status bars; fullscreen with F11 fills the whole screen
bindd = $mainMod ALT, F4, Fullscreen State 1 1, fullscreenstate, 1 1

# Maximizes the window and fullscreens it to current workspace, respects gaps and status bars; fullscreen with F11 limited to the window's occupied area
bindd = $mainMod ALT, F5, Fullscreen State 1 2, fullscreenstate, 1 2

# Maximizes the window and fullscreens it to current workspace, respects gaps and status bars; fullscreen with F11 limited to the window's occupied area
bindd = $mainMod ALT, F6, Fullscreen State 1 3, fullscreenstate, 1 3

# Maximizes the window to its current workpace, respects gaps and status bars; fullscreen with F11 fills the whole screen
bindd = $mainMod ALT, F7, Fullscreen State 1 1, fullscreenstate, 1 1

# PLUGINS
# plugin = /usr/lib64/hyprland/libhyprbars.so
# plugin = /usr/lib64/hyprland/libborders-plus-plus.so
plugin = /usr/lib64/hyprland/libxtra-dispatchers.so
plugin = /usr/lib64/hyprland/libhyprexpo.so
plugin {

    hyprbars {
        # https://www.reddit.com/r/hyprland/comments/1cyaz4u/i_like_hyprbars_thats_all/
        bar_height = 32
        bar_title_enabled = true
        # bar_color = $hyprbar_bg
        # bar_color = $hyprbar_bg
        bar_color = $hyprbar_bg
        col.text = $hyprbar_txt
        bar_text_size = 12
        bar_text_font = 'Inter Variable'
        bar_text_align = center
        bar_buttons_alignment = right
        bar_padding = 10
        bar_button_padding = 10
        bar_precedence_over_border = true
        bar_part_of_window = true
        bar_blur = true

        hyprbars-button = $hyprbar_move, $hyprbars_icon_size, 󱎘 , hyprctl dispatch closewindow
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size, 󰘖 , hyprctl dispatch fullscreen 1 # (maximize) fullscreen respecting gaps and status bar
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size,  , hyprctl dispatch movetoworkspacesilent special:minimized
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size, 󰐃 , hyprctl dispatch pin
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size,   , hyprctl dispatch togglefloating
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size, 󱣴 , hyprctl dispatch fullscreenstate 0 1 # fullscreen inside the tile
        hyprbars-button = $hyprbar_move, $hyprbars_icon_size, 󰊓 , hyprctl dispatch fullscreen 0 # fullscreen fills the whole display
        hyprbars-button = $hyprbar_bg, $hyprbars_icon_size, 󰨚 , hyprctl plugin unload /usr/lib64/hyprland/libhyprbars.so
        hyprbars-button = $hyprbar_bg, $hyprbars_icon_size,  , hyprctl dispatch movewindow mon:$secMon
        hyprbars-button = $hyprbar_bg, $hyprbars_icon_size,  , hyprctl dispatch movewindow mon:$priMon
        # hyprbars-button = $hyprbar_bg, $hyprbars_icon_size,  , hyprctl dispatch movetoworkspace special:nebula
        # hyprbars-button = $hyprbar_bg, $hyprbars_icon_size,  , hyprctl dispatch movetoworkspace special:magic
        # hyprbars-button = $hyprbar_bg, $hyprbars_icon_size, 󱂬 , hyprctl dispatch pseudo


        #   1   
    }
    borders-plus-plus {
        add_borders = 2 # 0 - 9

        # you can add up to 9 borders
        col.border_1 = rgba(8, 10, 11, 0.9)
        col.border_2 = rgba(63, 70, 157, 0.9)
        col.border_3 = $inac_border
        col.border_4 = $inac_border_2

        # -1 means "default" as in the one defined in general:border_size
        border_size_1 = 1
        border_size_2 = 1
        border_size_3 = -1
        border_size_4 = -1

        # makes outer edges match rounding of the parent. Turn on / off to better understand. Default = on.
        natural_rounding = on
    }
}
